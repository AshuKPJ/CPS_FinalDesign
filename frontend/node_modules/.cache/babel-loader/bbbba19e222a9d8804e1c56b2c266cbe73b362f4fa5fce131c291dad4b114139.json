{"ast":null,"code":"var _jsxFileName = \"D:\\\\UpWork\\\\AI_Inga\\\\CPS\\\\CPS_FinalDesign-main\\\\CPS_FinalDesign-main\\\\frontend\\\\src\\\\components\\\\modals\\\\ResetPasswordModal.jsx\",\n  _s = $RefreshSig$();\n// src/components/modals/ResetPasswordModal.jsx\nimport React, { useEffect, useState } from \"react\";\nimport toast from \"react-hot-toast\";\nimport useAuth from \"../../hooks/useAuth\";\nimport { requestPasswordReset } from \"../../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport default function ResetPasswordModal({\n  open,\n  onClose\n}) {\n  _s();\n  const {\n    user\n  } = useAuth();\n  const [email, setEmail] = useState(\"\");\n  const [submitting, setSubmitting] = useState(false);\n  const [devLink, setDevLink] = useState(\"\");\n  useEffect(() => {\n    if (open) {\n      setEmail((user === null || user === void 0 ? void 0 : user.email) || \"\");\n      setDevLink(\"\");\n    }\n  }, [open, user]);\n  if (!open) return null;\n  const onSubmit = async e => {\n    e.preventDefault();\n    setSubmitting(true);\n    try {\n      const {\n        ok,\n        reset_url\n      } = await requestPasswordReset(email);\n      if (ok) {\n        setDevLink(reset_url || \"\");\n        toast.success(\"Password reset link sent (check email).\");\n      } else {\n        toast.error(\"Failed to request reset.\");\n      }\n    } catch (e) {\n      var _e$response, _e$response$data;\n      toast.error((e === null || e === void 0 ? void 0 : (_e$response = e.response) === null || _e$response === void 0 ? void 0 : (_e$response$data = _e$response.data) === null || _e$response$data === void 0 ? void 0 : _e$response$data.detail) || \"Failed to request reset.\");\n    } finally {\n      setSubmitting(false);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 z-[1000] bg-black/50 flex items-center justify-center p-4\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-xl w-full max-w-md p-6 shadow-xl\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-lg font-semibold\",\n          children: \"Reset Password\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 44,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: \"text-gray-500 hover:text-gray-800\",\n          children: \"\\u2715\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 45,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: onSubmit,\n        className: \"space-y-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            className: \"block text-sm font-medium mb-1\",\n            children: \"Account Email\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 50,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"email\",\n            required: true,\n            value: email,\n            onChange: e => setEmail(e.target.value),\n            className: \"w-full border rounded px-3 py-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 51,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 49,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"px-4 py-2 rounded bg-gray-100\",\n            onClick: onClose,\n            children: \"Close\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 61,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: submitting,\n            className: \"px-4 py-2 rounded bg-indigo-600 text-white disabled:opacity-60\",\n            children: submitting ? \"Sending…\" : \"Send Reset Link\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 64,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 60,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 48,\n        columnNumber: 9\n      }, this), devLink && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mt-4 text-xs bg-gray-50 border rounded p-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"font-semibold mb-1\",\n          children: \"Dev reset URL (shows in dev only):\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"a\", {\n          className: \"text-indigo-600 break-all\",\n          href: devLink,\n          children: devLink\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 42,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 41,\n    columnNumber: 5\n  }, this);\n}\n_s(ResetPasswordModal, \"cHMOJ8POoDc615mARX+R67bU4aM=\", false, function () {\n  return [useAuth];\n});\n_c = ResetPasswordModal;\nvar _c;\n$RefreshReg$(_c, \"ResetPasswordModal\");","map":{"version":3,"names":["React","useEffect","useState","toast","useAuth","requestPasswordReset","jsxDEV","_jsxDEV","ResetPasswordModal","open","onClose","_s","user","email","setEmail","submitting","setSubmitting","devLink","setDevLink","onSubmit","e","preventDefault","ok","reset_url","success","error","_e$response","_e$response$data","response","data","detail","className","children","fileName","_jsxFileName","lineNumber","columnNumber","onClick","type","required","value","onChange","target","disabled","href","_c","$RefreshReg$"],"sources":["D:/UpWork/AI_Inga/CPS/CPS_FinalDesign-main/CPS_FinalDesign-main/frontend/src/components/modals/ResetPasswordModal.jsx"],"sourcesContent":["// src/components/modals/ResetPasswordModal.jsx\r\nimport React, { useEffect, useState } from \"react\";\r\nimport toast from \"react-hot-toast\";\r\nimport useAuth from \"../../hooks/useAuth\";\r\nimport { requestPasswordReset } from \"../../services/api\";\r\n\r\nexport default function ResetPasswordModal({ open, onClose }) {\r\n  const { user } = useAuth();\r\n  const [email, setEmail] = useState(\"\");\r\n  const [submitting, setSubmitting] = useState(false);\r\n  const [devLink, setDevLink] = useState(\"\");\r\n\r\n  useEffect(() => {\r\n    if (open) {\r\n      setEmail(user?.email || \"\");\r\n      setDevLink(\"\");\r\n    }\r\n  }, [open, user]);\r\n\r\n  if (!open) return null;\r\n\r\n  const onSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setSubmitting(true);\r\n    try {\r\n      const { ok, reset_url } = await requestPasswordReset(email);\r\n      if (ok) {\r\n        setDevLink(reset_url || \"\");\r\n        toast.success(\"Password reset link sent (check email).\");\r\n      } else {\r\n        toast.error(\"Failed to request reset.\");\r\n      }\r\n    } catch (e) {\r\n      toast.error(e?.response?.data?.detail || \"Failed to request reset.\");\r\n    } finally {\r\n      setSubmitting(false);\r\n    }\r\n  };\r\n\r\n  return (\r\n    <div className=\"fixed inset-0 z-[1000] bg-black/50 flex items-center justify-center p-4\">\r\n      <div className=\"bg-white rounded-xl w-full max-w-md p-6 shadow-xl\">\r\n        <div className=\"flex items-center justify-between mb-4\">\r\n          <h2 className=\"text-lg font-semibold\">Reset Password</h2>\r\n          <button onClick={onClose} className=\"text-gray-500 hover:text-gray-800\">✕</button>\r\n        </div>\r\n\r\n        <form onSubmit={onSubmit} className=\"space-y-4\">\r\n          <div>\r\n            <label className=\"block text-sm font-medium mb-1\">Account Email</label>\r\n            <input\r\n              type=\"email\"\r\n              required\r\n              value={email}\r\n              onChange={(e) => setEmail(e.target.value)}\r\n              className=\"w-full border rounded px-3 py-2\"\r\n            />\r\n          </div>\r\n\r\n          <div className=\"flex justify-end gap-2\">\r\n            <button type=\"button\" className=\"px-4 py-2 rounded bg-gray-100\" onClick={onClose}>\r\n              Close\r\n            </button>\r\n            <button\r\n              type=\"submit\"\r\n              disabled={submitting}\r\n              className=\"px-4 py-2 rounded bg-indigo-600 text-white disabled:opacity-60\"\r\n            >\r\n              {submitting ? \"Sending…\" : \"Send Reset Link\"}\r\n            </button>\r\n          </div>\r\n        </form>\r\n\r\n        {/* For dev: your API returns reset_url; show it so you can click it immediately */}\r\n        {devLink && (\r\n          <div className=\"mt-4 text-xs bg-gray-50 border rounded p-3\">\r\n            <div className=\"font-semibold mb-1\">Dev reset URL (shows in dev only):</div>\r\n            <a className=\"text-indigo-600 break-all\" href={devLink}>{devLink}</a>\r\n          </div>\r\n        )}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}